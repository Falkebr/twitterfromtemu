services:
  - name: twitterfromtemu
    type: web
    env: python
    buildCommand: |
      python3 -m venv venv
      source venv/bin/activate 
      cd ./frontend
      npm install
      npm run build
      cd ../
      cd ./backend
      pip install -r requirements.txt
    startCommand: "gunicorn backend.main:app --host 0.0.0.0 --port $PORT"
    envVars:
      - key: DATABASE_URL
        fromDatabase:
          name: temu_twitterdb
          property: connectionString
      - key: SECRET_KEY
        sync: false  
databases:
  - name: temu_twitterdb
    type: postgresql